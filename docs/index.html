<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Isobolic Identification and Estimation of Interaction using Stochastic Interventions • IsoXshift</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Isobolic Identification and Estimation of Interaction using Stochastic Interventions">
<meta property="og:description" content="A methodology for mixed exposure analysis that leverages
    data-adaptive target parameters, CV-TMLE, stochastic interventions and basis function decomposition.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">IsoXshift</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/intro_IsoXshift.html">Isobolic Interaction Identification and Estimation using Data-Adaptive Stochastic Interventions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="risoxshift">R/<code>IsoXshift</code>
<a class="anchor" aria-label="anchor" href="#risoxshift"></a>
</h1></div>
<!-- badges: start -->

<blockquote>
<p>Isobolic Interaction Identification and Estimation using Data-Adaptive Stochastic Interventions <strong>Authors:</strong> <a href="https://davidmccoy.org" class="external-link">David McCoy</a></p>
</blockquote>
<hr>
<div class="section level2">
<h2 id="whats-isoxshift">What’s <code>IsoXshift</code>?<a class="anchor" aria-label="anchor" href="#whats-isoxshift"></a>
</h2>
<p>The <code>IsoXshift</code> R package offers an approach which identifies the minimum effort intervention on two exposures which, if the population were given these intervention levels, would result in a target outcome. This parameter reflects the most synergistic interaction or set of interactions in a mixed exposure. The target parameter is similar to isobolic interactions used in toxicology studies where researchers investigate how much simultaneous dose of two exposures results in a target outcome, like cancer or cell death in cultures.</p>
<p>From a policy perspective, this parameter represents the most efficient intervention that can be done on a mixed exposure to get to a desired outcome. This is because, for a collection of possible interventions or changes to pollutants, for example, we find the exposure set that most efficiently results in an expected outcome close to our desired outcome. Efficient here means the exposure(s) need to be shifted the least to get to a desired outcome, like pre-industry levels of thyroid cancer etc.</p>
</div>
<div class="section level2">
<h2 id="realistic-interventions">Realistic Interventions<a class="anchor" aria-label="anchor" href="#realistic-interventions"></a>
</h2>
<p>This package first identifies the most efficient intervention policy that gets to a desired outcome using g-computation which results in two exposure levels a set of exposures should be set to. Because it’s unrealistic to set a population to this specific oracle intervention, because the likelihood of certain individuals exposed to this level may be near 0, we instead estimate the effects of the policy if we were to get everyone as close as possible to this oracle level. This is done by finding an intervention level as close to the oracle level as possible under some restrictions that the individual conditional likelihood of being exposed doesn’t move too far away from their observed levels.</p>
<p>We the estimate the impact of our “intention to intervene” using CV-TMLE. Using this oracle point paramater as our target we shift individuals as close as possible to this level without violating the density ratio, the intervention level exposure likelihood compared to observed level likelihood. Thus, each individuals actual intervention is different but is aimed towards the target, hence intention to intervene.</p>
</div>
<div class="section level2">
<h2 id="joint-vs-additive-interventions">Joint vs. Additive Interventions<a class="anchor" aria-label="anchor" href="#joint-vs-additive-interventions"></a>
</h2>
<p>We define interaction as the counterfactual mean of the outcome under stochastic interventions of two exposures compared to the additive counterfactual mean of the two exposures intervened on independently. These interventions or exposure changes depend on naturally observed values, as described in past literature (Dı́az and van der Laan 2012; Haneuse and Rotnitzky 2013), but with our new parameter in mind. Thus, what is estimated is like asking, what the expected outcome is if we were to enforce the most efficient policy intervention in a realistic setting where not everyone can actually receive that exact exposure level or levels.</p>
</div>
<div class="section level2">
<h2 id="target-levels-and-shifting-to-those-levels">Target Levels and Shifting to those Levels<a class="anchor" aria-label="anchor" href="#target-levels-and-shifting-to-those-levels"></a>
</h2>
<p>To utilize the package, users need to provide vectors for exposures, covariates, and outcomes. They also specify the target_outcome_lvl for the outcome, epsilon, which is some allowed closeness to the target. For example, if the target outcome level is 15, and epsilon is 0.5, then interventions that lead to 15.5 are considered. The restriction limit is hn_trunc_thresh which is the allowed distance from the original exposure likelihood. 10 for example indicates that the likelihood should not be more than x10 difference from the original exposure level likelihood. That is, if an individual’s likelihood is originally 0.1 given their covariate history and the likelihood of exposure to the intervened level is 0.01, this is 10 times different and would be the limit intervention.</p>
<p>A detailed guide is provided in the vignette. With these inputs, <code>IsoXshift</code> processes the data and delivers tables showcasing fold-specific results and aggregated outcomes, allowing users to glean insights effectively.</p>
<p><code>IsoXshift</code> also incorporates features from the <code>sl3</code> package (Coyle, Hejazi, Malenica, et al. 2022), facilitating ensemble machine learning in the estimation process. If the user does not specify any stack parameters, <code>IsoXshift</code> will automatically create an ensemble of machine learning algorithms that strike a balance between flexibility and computational efficiency.</p>
<hr>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><em>Note:</em> Because the <code>IsoXshift</code> package (currently) depends on <code>sl3</code> that allows ensemble machine learning to be used for nuisance parameter estimation and <code>sl3</code> is not on CRAN the <code>IsoXshift</code> package is not available on CRAN and must be downloaded here.</p>
<p><code>IsoXshift</code> uses the <code>sl3</code> package to build ensemble machine learners for each nuisance parameter. We have to install off the development branch, first download these two packages for <code>sl3</code></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"tlverse/sl3@devel"</span><span class="op">)</span></span></code></pre></div>
<p>Make sure <code>sl3</code> installs correctly then install <code>IsoXshift</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"blind-contours/IsoXshift@main"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>To illustrate how <code>IsoXshift</code> may be used to ascertain the effect of a mixed exposure, we will use synthetic data from the National Institute of Environmental Health. Let’s first load the relevant packages:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">IsoXshift</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: usethis</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tlverse.org/sl3" class="external-link">sl3</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">seed</span> <span class="op">&lt;-</span> <span class="fl">429153</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed</span><span class="op">)</span></span></code></pre></div>
<p>We will directly use synthetic data from the NIEHS used to test new mixture methods. This data has built in strong positive and negative marginal effects and certain interactions. Found here: <a href="https://github.com/niehs-prime/2015-NIEHS-MIxtures-Workshop" class="external-link uri">https://github.com/niehs-prime/2015-NIEHS-MIxtures-Workshop</a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"NIEHS_data_1"</span>, package <span class="op">=</span> <span class="st">"IsoXshift"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NIEHS_data_1</span><span class="op">$</span><span class="va">W</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">NIEHS_data_1</span><span class="op">)</span>, mean <span class="op">=</span> <span class="fl">0</span>, sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="va">NIEHS_data_1</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"W"</span>, <span class="st">"Z"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">NIEHS_data_1</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X1"</span>, <span class="st">"X2"</span>, <span class="st">"X3"</span>, <span class="st">"X4"</span>, <span class="st">"X5"</span>, <span class="st">"X6"</span>, <span class="st">"X7"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">NIEHS_data_1</span><span class="op">$</span><span class="va">Y</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">NIEHS_data_1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"NIEHS Data"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
NIEHS Data
</caption>
<thead><tr>
<th style="text-align:right;">
obs
</th>
<th style="text-align:right;">
Y
</th>
<th style="text-align:right;">
X1
</th>
<th style="text-align:right;">
X2
</th>
<th style="text-align:right;">
X3
</th>
<th style="text-align:right;">
X4
</th>
<th style="text-align:right;">
X5
</th>
<th style="text-align:right;">
X6
</th>
<th style="text-align:right;">
X7
</th>
<th style="text-align:right;">
Z
</th>
<th style="text-align:right;">
W
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7.534686
</td>
<td style="text-align:right;">
0.4157066
</td>
<td style="text-align:right;">
0.5308077
</td>
<td style="text-align:right;">
0.2223965
</td>
<td style="text-align:right;">
1.1592634
</td>
<td style="text-align:right;">
2.4577556
</td>
<td style="text-align:right;">
0.9438601
</td>
<td style="text-align:right;">
1.8714406
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1335790
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
19.611934
</td>
<td style="text-align:right;">
0.5293572
</td>
<td style="text-align:right;">
0.9339570
</td>
<td style="text-align:right;">
1.1210595
</td>
<td style="text-align:right;">
1.3350074
</td>
<td style="text-align:right;">
0.3096883
</td>
<td style="text-align:right;">
0.5190970
</td>
<td style="text-align:right;">
0.2418065
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0585291
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
12.664050
</td>
<td style="text-align:right;">
0.4849759
</td>
<td style="text-align:right;">
0.7210988
</td>
<td style="text-align:right;">
0.4629027
</td>
<td style="text-align:right;">
1.0334138
</td>
<td style="text-align:right;">
0.9492810
</td>
<td style="text-align:right;">
0.3664090
</td>
<td style="text-align:right;">
0.3502445
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1342057
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
15.600288
</td>
<td style="text-align:right;">
0.8275456
</td>
<td style="text-align:right;">
1.0457137
</td>
<td style="text-align:right;">
0.9699040
</td>
<td style="text-align:right;">
0.9045099
</td>
<td style="text-align:right;">
0.9107914
</td>
<td style="text-align:right;">
0.4299847
</td>
<td style="text-align:right;">
1.0007901
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0734320
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
18.606498
</td>
<td style="text-align:right;">
0.5190363
</td>
<td style="text-align:right;">
0.7802400
</td>
<td style="text-align:right;">
0.6142188
</td>
<td style="text-align:right;">
0.3729743
</td>
<td style="text-align:right;">
0.5038126
</td>
<td style="text-align:right;">
0.3575472
</td>
<td style="text-align:right;">
0.5906156
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
-0.0148427
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
18.525890
</td>
<td style="text-align:right;">
0.4009491
</td>
<td style="text-align:right;">
0.8639886
</td>
<td style="text-align:right;">
0.5501847
</td>
<td style="text-align:right;">
0.9011016
</td>
<td style="text-align:right;">
1.2907615
</td>
<td style="text-align:right;">
0.7990418
</td>
<td style="text-align:right;">
1.5097039
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1749775
</td>
</tr>
</tbody>
</table>
<p>This data has X1 and X7 has the most synergy or super-additive effect so we might expect to find this relationship as the most synergistic exposure relationship based on our definition. It is also possible that the most efficient intervention is one that intervenes on an antagonistic pair, shifting positive associations higher and negative lower in the antagonistic interaction.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">ptm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proc.time.html" class="external-link">proc.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sim_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/IsoXshift.html">IsoXshift</a></span><span class="op">(</span></span>
<span>  w <span class="op">=</span> <span class="va">w</span>,</span>
<span>  a <span class="op">=</span> <span class="va">a</span>,</span>
<span>  y <span class="op">=</span> <span class="va">y</span>,</span>
<span>  n_folds <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  num_cores <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  outcome_type <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  seed <span class="op">=</span> <span class="va">seed</span>,</span>
<span>  target_outcome_lvl <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  epsilon <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 222.8222  Pars:  0.02601 0.97399</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 222.8222  Pars:  0.02601 0.97399</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 494.9785  Pars:  0.000007745 0.999992255</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 494.9785  Pars:  0.00000003548 0.99999996452</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 487.6227  Pars:  0.999994298 0.000005701</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 487.6227  Pars:  0.9999991589 0.0000008411</span></span>
<span><span class="co">#&gt; Iter: 3 fn: 487.6227  Pars:  0.9999994859 0.0000005141</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 3 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 226.2807  Pars:  0.05745 0.94255</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 226.2807  Pars:  0.05745 0.94255</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 484.0375  Pars:  0.0000005784 0.9999994218</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 484.0375  Pars:  0.0000001083 0.9999998917</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 479.8223  Pars:  0.37822 0.62178</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 479.8223  Pars:  0.37820 0.62180</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 221.0642  Pars:  0.00000005466 0.99999994546</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 221.0642  Pars:  0.00000003637 0.99999996363</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 496.3027  Pars:  0.21429 0.78571</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 496.3027  Pars:  0.21398 0.78602</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 491.9260  Pars:  0.0000125 0.9999875</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 491.9260  Pars:  0.000007487 0.999992513</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 104.6614  Pars:  0.08134 0.91866</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 104.6614  Pars:  0.08134 0.91866</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 495.9732  Pars:  0.41785 0.58215</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 495.9732  Pars:  0.41785 0.58215</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 495.9761  Pars:  0.9999993936 0.0000006071</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 495.9761  Pars:  0.9999996437 0.0000003563</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 220.9891  Pars:  0.00000000428 0.99999999571</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 220.9891  Pars:  0.00000000105 0.99999999895</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 496.7959  Pars:  0.32776 0.67224</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 496.7959  Pars:  0.32777 0.67223</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 498.7841  Pars:  0.99999888 0.00000112</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 498.7841  Pars:  0.9999997064 0.0000002936</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 235.0054  Pars:  0.03661 0.96339</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 235.0054  Pars:  0.03661 0.96339</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 492.8295  Pars:  0.999995555 0.000004445</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 492.8295  Pars:  0.999998947 0.000001053</span></span>
<span><span class="co">#&gt; Iter: 3 fn: 492.8295  Pars:  0.9999995304 0.0000004696</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 3 iterations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Iter: 1 fn: 491.7396  Pars:  0.9999963 0.0000037</span></span>
<span><span class="co">#&gt; Iter: 2 fn: 491.7396  Pars:  0.999997994 0.000002006</span></span>
<span><span class="co">#&gt; solnp--&gt; Completed in 2 iterations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proc.time.html" class="external-link">proc.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">ptm</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  74.595   3.610 976.269</span></span>
<span></span>
<span><span class="va">oracle_parameter</span> <span class="op">&lt;-</span> <span class="va">sim_results</span><span class="op">$</span><span class="va">`Oracle Pooled Results`</span></span>
<span><span class="va">k_fold_results</span> <span class="op">&lt;-</span> <span class="va">sim_results</span><span class="op">$</span><span class="va">`K-fold Results`</span></span>
<span><span class="va">oracle_targets</span> <span class="op">&lt;-</span> <span class="va">sim_results</span><span class="op">$</span><span class="va">`K Fold Oracle Targets`</span></span></code></pre></div>
<p>Of note: these results will be more consistent with higher folds but here we use 6 so readme builds more quickly for users.</p>
</div>
<div class="section level2">
<h2 id="k-fold-specific-results">K-fold Specific Results<a class="anchor" aria-label="anchor" href="#k-fold-specific-results"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">k_fold_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">k_fold_results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">k_fold_results</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="va">k_fold_results</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"List of K Fold Results"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
List of K Fold Results
</caption>
<thead><tr>
<th style="text-align:right;">
Psi
</th>
<th style="text-align:right;">
Variance
</th>
<th style="text-align:right;">
SE
</th>
<th style="text-align:right;">
Lower CI
</th>
<th style="text-align:right;">
Upper CI
</th>
<th style="text-align:right;">
P-value
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:left;">
Type
</th>
<th style="text-align:right;">
Fold
</th>
<th style="text-align:left;">
Average Delta
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
-13.5086705
</td>
<td style="text-align:right;">
0.0273477
</td>
<td style="text-align:right;">
0.1653715
</td>
<td style="text-align:right;">
-13.8328
</td>
<td style="text-align:right;">
-13.1845
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
-0.902
</td>
</tr>
<tr>
<td style="text-align:right;">
-12.1225847
</td>
<td style="text-align:right;">
0.2853685
</td>
<td style="text-align:right;">
0.5341989
</td>
<td style="text-align:right;">
-13.1696
</td>
<td style="text-align:right;">
-11.0756
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2.222
</td>
</tr>
<tr>
<td style="text-align:right;">
-14.7686203
</td>
<td style="text-align:right;">
0.0086283
</td>
<td style="text-align:right;">
0.0928884
</td>
<td style="text-align:right;">
-14.9507
</td>
<td style="text-align:right;">
-14.5866
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
-0.902-2.222
</td>
</tr>
<tr>
<td style="text-align:right;">
10.8626348
</td>
<td style="text-align:right;">
0.1947857
</td>
<td style="text-align:right;">
0.4413453
</td>
<td style="text-align:right;">
9.9976
</td>
<td style="text-align:right;">
11.7277
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
-0.902-2.222
</td>
</tr>
<tr>
<td style="text-align:right;">
0.7719493
</td>
<td style="text-align:right;">
0.9860012
</td>
<td style="text-align:right;">
0.9929759
</td>
<td style="text-align:right;">
-1.1742
</td>
<td style="text-align:right;">
2.7181
</td>
<td style="text-align:right;">
0.4385318
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
-0.871
</td>
</tr>
<tr>
<td style="text-align:right;">
0.9442252
</td>
<td style="text-align:right;">
0.6999801
</td>
<td style="text-align:right;">
0.8366482
</td>
<td style="text-align:right;">
-0.6956
</td>
<td style="text-align:right;">
2.5840
</td>
<td style="text-align:right;">
0.3019336
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2.023
</td>
</tr>
<tr>
<td style="text-align:right;">
10.2589986
</td>
<td style="text-align:right;">
1.5165367
</td>
<td style="text-align:right;">
1.2314774
</td>
<td style="text-align:right;">
7.8453
</td>
<td style="text-align:right;">
12.6726
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
-0.871-2.023
</td>
</tr>
<tr>
<td style="text-align:right;">
8.5428240
</td>
<td style="text-align:right;">
1.0429063
</td>
<td style="text-align:right;">
1.0212279
</td>
<td style="text-align:right;">
6.5413
</td>
<td style="text-align:right;">
10.5444
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
-0.871-2.023
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.6416571
</td>
<td style="text-align:right;">
0.6609212
</td>
<td style="text-align:right;">
0.8129706
</td>
<td style="text-align:right;">
-2.2351
</td>
<td style="text-align:right;">
0.9517
</td>
<td style="text-align:right;">
0.4766824
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
-0.893
</td>
</tr>
<tr>
<td style="text-align:right;">
-2.2660756
</td>
<td style="text-align:right;">
0.6944661
</td>
<td style="text-align:right;">
0.8333463
</td>
<td style="text-align:right;">
-3.8994
</td>
<td style="text-align:right;">
-0.6327
</td>
<td style="text-align:right;">
0.0130522
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
1.942
</td>
</tr>
<tr>
<td style="text-align:right;">
2.7737158
</td>
<td style="text-align:right;">
1.7005188
</td>
<td style="text-align:right;">
1.3040394
</td>
<td style="text-align:right;">
0.2178
</td>
<td style="text-align:right;">
5.3296
</td>
<td style="text-align:right;">
0.0151431
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
-0.893-1.942
</td>
</tr>
<tr>
<td style="text-align:right;">
5.6814485
</td>
<td style="text-align:right;">
0.4304117
</td>
<td style="text-align:right;">
0.6560577
</td>
<td style="text-align:right;">
4.3956
</td>
<td style="text-align:right;">
6.9673
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
-0.893-1.942
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.9763588
</td>
<td style="text-align:right;">
1.0797738
</td>
<td style="text-align:right;">
1.0391217
</td>
<td style="text-align:right;">
-3.0130
</td>
<td style="text-align:right;">
1.0603
</td>
<td style="text-align:right;">
0.3381620
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
-0.899
</td>
</tr>
<tr>
<td style="text-align:right;">
8.4683426
</td>
<td style="text-align:right;">
1.0442643
</td>
<td style="text-align:right;">
1.0218925
</td>
<td style="text-align:right;">
6.4655
</td>
<td style="text-align:right;">
10.4712
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
1.941
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4460469
</td>
<td style="text-align:right;">
1.9400116
</td>
<td style="text-align:right;">
1.3928430
</td>
<td style="text-align:right;">
2.7161
</td>
<td style="text-align:right;">
8.1760
</td>
<td style="text-align:right;">
0.0000039
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
-0.899-1.941
</td>
</tr>
<tr>
<td style="text-align:right;">
-2.0459369
</td>
<td style="text-align:right;">
0.7792955
</td>
<td style="text-align:right;">
0.8827772
</td>
<td style="text-align:right;">
-3.7761
</td>
<td style="text-align:right;">
-0.3157
</td>
<td style="text-align:right;">
0.0294401
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
-0.899-1.941
</td>
</tr>
<tr>
<td style="text-align:right;">
-9.3113201
</td>
<td style="text-align:right;">
0.1582846
</td>
<td style="text-align:right;">
0.3978500
</td>
<td style="text-align:right;">
-10.0911
</td>
<td style="text-align:right;">
-8.5315
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
-0.939
</td>
</tr>
<tr>
<td style="text-align:right;">
-6.3934531
</td>
<td style="text-align:right;">
1.0026758
</td>
<td style="text-align:right;">
1.0013370
</td>
<td style="text-align:right;">
-8.3560
</td>
<td style="text-align:right;">
-4.4309
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
1.589
</td>
</tr>
<tr>
<td style="text-align:right;">
-16.1190466
</td>
<td style="text-align:right;">
0.1048507
</td>
<td style="text-align:right;">
0.3238066
</td>
<td style="text-align:right;">
-16.7537
</td>
<td style="text-align:right;">
-15.4844
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
-0.939-1.589
</td>
</tr>
<tr>
<td style="text-align:right;">
-0.4142735
</td>
<td style="text-align:right;">
1.3869984
</td>
<td style="text-align:right;">
1.1777090
</td>
<td style="text-align:right;">
-2.7225
</td>
<td style="text-align:right;">
1.8940
</td>
<td style="text-align:right;">
0.7026539
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
-0.939-1.589
</td>
</tr>
<tr>
<td style="text-align:right;">
-6.2074296
</td>
<td style="text-align:right;">
0.1879825
</td>
<td style="text-align:right;">
0.4335695
</td>
<td style="text-align:right;">
-7.0572
</td>
<td style="text-align:right;">
-5.3576
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
-0.858
</td>
</tr>
<tr>
<td style="text-align:right;">
-5.4070107
</td>
<td style="text-align:right;">
0.5718131
</td>
<td style="text-align:right;">
0.7561833
</td>
<td style="text-align:right;">
-6.8891
</td>
<td style="text-align:right;">
-3.9249
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
1.687
</td>
</tr>
<tr>
<td style="text-align:right;">
-13.2608365
</td>
<td style="text-align:right;">
0.1036790
</td>
<td style="text-align:right;">
0.3219922
</td>
<td style="text-align:right;">
-13.8919
</td>
<td style="text-align:right;">
-12.6297
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
X1-X5
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
-0.858-1.687
</td>
</tr>
<tr>
<td style="text-align:right;">
-1.6463962
</td>
<td style="text-align:right;">
1.2525969
</td>
<td style="text-align:right;">
1.1191948
</td>
<td style="text-align:right;">
-3.8400
</td>
<td style="text-align:right;">
0.5472
</td>
<td style="text-align:right;">
0.1196468
</td>
<td style="text-align:right;">
83
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
-0.858-1.687
</td>
</tr>
</tbody>
</table>
<p>Here we see that X1-X5 are found in all the folds. This means that, to get to our target outcome of 15, with precision up to 0.5, these two exposures are found to most efficiently get to our target outcome under minimal intervention.</p>
<p>The column Psi shows the expected change in outcome under shift compared to no shift. Type indicates which variable was shifted, X1, X5, X1 and X5 and then interaction which compares X1-X5 to X1 + X5. So for example a Psi of -13.5 for X1 indicates that the outcome reduces by 13.5 when we attempt to shift X1 towards the oracle point parameter. Which in this fold is 0.05. So under a policy where we try and shift X1 towards the value 0.05 under restrictions of not violating positivity support the outcome goes down by 13.5. The deltas in Average Delta columns shows the average delta in the fold for each variable. This is the average shift we get under our support to get to the oracle parameter. For example -13.5 means that the average outcome goes down by 13.5 when shifting X1 by -0.902 on average, towards our target.</p>
<p>Overall, average delta column indicates the average shift away from each individuals observed exposure level in order to reach the target under restrictions.</p>
<p>In reality, when looking at the Average Delta column we can only reduce X1 by about 1 and increase X5 by about 2 with support from our data.</p>
</div>
<div class="section level2">
<h2 id="oracle-point-parameters">Oracle Point Parameters<a class="anchor" aria-label="anchor" href="#oracle-point-parameters"></a>
</h2>
<p>These interventions are:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oracle_targets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">oracle_targets</span><span class="op">)</span></span>
<span><span class="va">oracle_targets</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Oracle Targets"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Oracle Targets
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Variable1
</th>
<th style="text-align:left;">
Variable2
</th>
<th style="text-align:right;">
ObservedLevel1
</th>
<th style="text-align:right;">
ObservedLevel2
</th>
<th style="text-align:right;">
IntervenedLevel1
</th>
<th style="text-align:right;">
IntervenedLevel2
</th>
<th style="text-align:right;">
AvgDiff
</th>
<th style="text-align:right;">
Difference
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.155827
</td>
<td style="text-align:right;">
1.242123
</td>
<td style="text-align:right;">
0.0566475
</td>
<td style="text-align:right;">
3.414815
</td>
<td style="text-align:right;">
1.635936
</td>
<td style="text-align:right;">
0.0668849
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.147629
</td>
<td style="text-align:right;">
1.218358
</td>
<td style="text-align:right;">
0.0481946
</td>
<td style="text-align:right;">
3.414815
</td>
<td style="text-align:right;">
1.647946
</td>
<td style="text-align:right;">
0.3846076
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.143893
</td>
<td style="text-align:right;">
1.235131
</td>
<td style="text-align:right;">
0.0481946
</td>
<td style="text-align:right;">
3.155947
</td>
<td style="text-align:right;">
1.508257
</td>
<td style="text-align:right;">
0.0206467
</td>
</tr>
<tr>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.124229
</td>
<td style="text-align:right;">
1.236977
</td>
<td style="text-align:right;">
0.2923519
</td>
<td style="text-align:right;">
3.155947
</td>
<td style="text-align:right;">
1.375423
</td>
<td style="text-align:right;">
0.2560524
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.140465
</td>
<td style="text-align:right;">
1.249656
</td>
<td style="text-align:right;">
0.0481946
</td>
<td style="text-align:right;">
2.751177
</td>
<td style="text-align:right;">
1.296896
</td>
<td style="text-align:right;">
0.4992674
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
X1
</td>
<td style="text-align:left;">
X5
</td>
<td style="text-align:right;">
1.140439
</td>
<td style="text-align:right;">
1.240693
</td>
<td style="text-align:right;">
0.0481946
</td>
<td style="text-align:right;">
2.897264
</td>
<td style="text-align:right;">
1.374408
</td>
<td style="text-align:right;">
0.1197868
</td>
</tr>
</tbody>
</table>
<p>Here this table shows the average exposed level for each exposure, the intervened level for both exposures, this is the level the exposures are set to which gets to the target outcome most efficiently, Avg Difference, is the average difference between the intervention and observed outcome (the “effort”), and Difference is the difference between the expected outcome under intervention and the target outcome.</p>
<p>What we see here is that to get to the target outcome 12, where the observed average is 53, so a significant reduction, the most efficient intervention is to reduce X1 to around 0.05 and to increase X5 (due to its antagonistic relationship) to about 3.</p>
<p>To get more power, we do a pooled TMLE over our findings for the intervention with minimal effort that gets to our target outcome:</p>
</div>
<div class="section level2">
<h2 id="oracle-parameter">Oracle Parameter<a class="anchor" aria-label="anchor" href="#oracle-parameter"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oracle_parameter</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Pooled Oracle Parameter"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Pooled Oracle Parameter
</caption>
<thead><tr>
<th style="text-align:right;">
Psi
</th>
<th style="text-align:right;">
Variance
</th>
<th style="text-align:right;">
SE
</th>
<th style="text-align:right;">
Lower CI
</th>
<th style="text-align:right;">
Upper CI
</th>
<th style="text-align:right;">
P-value
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:left;">
Type
</th>
<th style="text-align:left;">
Fold
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
-4.500727
</td>
<td style="text-align:right;">
0.0942057
</td>
<td style="text-align:right;">
0.3069295
</td>
<td style="text-align:right;">
-5.1023
</td>
<td style="text-align:right;">
-3.8992
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
500
</td>
<td style="text-align:left;">
Var 1
</td>
<td style="text-align:left;">
Pooled TMLE
</td>
</tr>
<tr>
<td style="text-align:right;">
-5.274783
</td>
<td style="text-align:right;">
0.1789838
</td>
<td style="text-align:right;">
0.4230647
</td>
<td style="text-align:right;">
-6.1040
</td>
<td style="text-align:right;">
-4.4456
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
500
</td>
<td style="text-align:left;">
Var 2
</td>
<td style="text-align:left;">
Pooled TMLE
</td>
</tr>
<tr>
<td style="text-align:right;">
-8.023789
</td>
<td style="text-align:right;">
0.0973612
</td>
<td style="text-align:right;">
0.3120275
</td>
<td style="text-align:right;">
-8.6354
</td>
<td style="text-align:right;">
-7.4122
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
500
</td>
<td style="text-align:left;">
Joint
</td>
<td style="text-align:left;">
Pooled TMLE
</td>
</tr>
<tr>
<td style="text-align:right;">
1.751721
</td>
<td style="text-align:right;">
0.1782565
</td>
<td style="text-align:right;">
0.4222043
</td>
<td style="text-align:right;">
0.9242
</td>
<td style="text-align:right;">
2.5792
</td>
<td style="text-align:right;">
0.0070199
</td>
<td style="text-align:right;">
500
</td>
<td style="text-align:left;">
Interaction
</td>
<td style="text-align:left;">
Pooled TMLE
</td>
</tr>
</tbody>
</table>
<p>This gives pooled estimates for the shift of each variable in the relationship individually, joint and our definition of interaction comparing the expectation of the outcome under joint shift compared to the expectations under the sum of individual shifts.</p>
<p>Overall, this package finds the intervention that, with minimal effort, gets to a desired outcome in a mixed exposure. It then estimates, using CV-TMLE, a policy intervention that attempts to get a population’s exposure as close as possible to this oracle intervention level without violating positivity.</p>
<p>In this NIEHS data set we correctly identify the most synergistic relationship built into the data.</p>
<p>More discussion is found in the vignette.</p>
<hr>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>If you encounter any bugs or have any specific feature requests, please <a href="https://github.com/blind-contours/IsoXshift/issues" class="external-link">file an issue</a>. Further details on filing issues are provided in our <a href="https://github.com/blind-contours/%20IsoXshift/main/contributing.md" class="external-link">contribution guidelines</a>.</p>
<hr>
</div>
<div class="section level2">
<h2 id="contributions">Contributions<a class="anchor" aria-label="anchor" href="#contributions"></a>
</h2>
<p>Contributions are very welcome. Interested contributors should consult our <a href="https://github.com/blind-contours/IsoXshift/blob/master/CONTRIBUTING.md" class="external-link">contribution guidelines</a> prior to submitting a pull request.</p>
<hr>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>After using the <code>IsoXshift</code> R package, please cite the following:</p>
<hr>
</div>
<div class="section level2">
<h2 id="related">Related<a class="anchor" aria-label="anchor" href="#related"></a>
</h2>
<ul>
<li><p><a href="https://github.com/tlverse/tmle3shift" class="external-link">R/<code>tmle3shift</code></a> - An R package providing an independent implementation of the same core routines for the TML estimation procedure and statistical methodology as is made available here, through reliance on a unified interface for Targeted Learning provided by the <a href="https://github.com/tlverse/tmle3" class="external-link"><code>tmle3</code></a> engine of the <a href="https://github.com/tlverse" class="external-link"><code>tlverse</code> ecosystem</a>.</p></li>
<li><p><a href="https://github.com/nhejazi/medshift" class="external-link">R/<code>medshift</code></a> - An R package providing facilities to estimate the causal effect of stochastic treatment regimes in the mediation setting, including classical (IPW) and augmented double robust (one-step) estimators. This is an implementation of the methodology explored by Dı́az and Hejazi (2020).</p></li>
<li><p><a href="https://github.com/nhejazi/haldensify" class="external-link">R/<code>haldensify</code></a> - A minimal package for estimating the conditional density treatment mechanism component of this parameter based on using the <a href="https://github.com/tlverse/hal9001" class="external-link">highly adaptive lasso</a> (Coyle, Hejazi, Phillips, et al. 2022; Hejazi, Coyle, and van der Laan 2020) in combination with a pooled hazard regression. This package implements a variant of the approach advocated by Dı́az and van der Laan (2011).</p></li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>The development of this software was supported in part through NIH grant P42ES004705 from NIEHS</p>
<hr>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>© 2020-2022 <a href="https://davidmccoy.org" class="external-link">David B. McCoy</a></p>
<p>The contents of this repository are distributed under the MIT license. See below for details:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>MIT License</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">Copyright</span> (c) <span class="dv">2020-2022</span> David B. McCoy</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>of this software and associated documentation <span class="fu">files</span> (the <span class="st">"Software"</span>), to deal</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="cf">in</span> the Software without restriction, including without limitation the rights</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>to use, copy, modify, merge, publish, distribute, sublicense, and<span class="sc">/</span>or sell</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>copies of the Software, and to permit persons to whom the Software is</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>furnished to do so, subject to the following conditions<span class="sc">:</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>The above copyright notice and this permission notice shall be included <span class="cf">in</span> all</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>copies or substantial portions of the Software.</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>THE SOFTWARE IS PROVIDED <span class="st">"AS IS"</span>, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>SOFTWARE.</span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-coyle-sl3-rpkg" class="csl-entry">
Coyle, Jeremy R, Nima S Hejazi, Ivana Malenica, Rachael V Phillips, and Oleg Sofrygin. 2022. “<span class="nocase">sl3</span>: Modern Machine Learning Pipelines for Super Learning.” <a href="https://doi.org/10.5281/zenodo.1342293" class="external-link uri">https://doi.org/10.5281/zenodo.1342293</a>.
</div>
<div id="ref-coyle-hal9001-rpkg" class="csl-entry">
Coyle, Jeremy R, Nima S Hejazi, Rachael V Phillips, Lars W van der Laan, and Mark J van der Laan. 2022. “<span class="nocase">hal9001</span>: The Scalable Highly Adaptive Lasso.” <a href="https://doi.org/10.5281/zenodo.3558313" class="external-link uri">https://doi.org/10.5281/zenodo.3558313</a>.
</div>
<div id="ref-diaz2020causal" class="csl-entry">
Dı́az, Iván, and Nima S Hejazi. 2020. “Causal Mediation Analysis for Stochastic Interventions.” <em>Journal of the Royal Statistical Society: Series B (Statistical Methodology)</em> 82 (3): 661–83. <a href="https://doi.org/10.1111/rssb.12362" class="external-link uri">https://doi.org/10.1111/rssb.12362</a>.
</div>
<div id="ref-diaz2011super" class="csl-entry">
Dı́az, Iván, and Mark J van der Laan. 2011. “Super Learner Based Conditional Density Estimation with Application to Marginal Structural Models.” <em>The International Journal of Biostatistics</em> 7 (1): 1–20.
</div>
<div id="ref-diaz2012population" class="csl-entry">
———. 2012. “Population Intervention Causal Effects Based on Stochastic Interventions.” <em>Biometrics</em> 68 (2): 541–49.
</div>
<div id="ref-haneuse2013estimation" class="csl-entry">
Haneuse, Sebastian, and Andrea Rotnitzky. 2013. “Estimation of the Effect of Interventions That Modify the Received Treatment.” <em>Statistics in Medicine</em> 32 (30): 5260–77.
</div>
<div id="ref-hejazi2020hal9001-joss" class="csl-entry">
Hejazi, Nima S, Jeremy R Coyle, and Mark J van der Laan. 2020. “<span class="nocase">hal9001</span>: Scalable Highly Adaptive Lasso Regression in R.” <em>Journal of Open Source Software</em> 5 (53): 2526. <a href="https://doi.org/10.21105/joss.02526" class="external-link uri">https://doi.org/10.21105/joss.02526</a>.
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing IsoXshift</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David McCoy <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5515-6307" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/blind-contours/IsoXshift/actions" class="external-link"><img src="https://github.com/blind-contours/IsoXshift/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/github/blind-contours/IsoXshift?branch=master" class="external-link"><img src="https://img.shields.io/codecov/c/github/blind-contours/IsoXshift/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://www.r-pkg.org/pkg/IsoXshift" class="external-link"><img src="https://www.r-pkg.org/badges/version/IsoXshift" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=IsoXshift" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/IsoXshift" alt="CRAN downloads"></a></li>
<li><a href="https://CRAN.R-project.org/package=IsoXshift" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/IsoXshift" alt="CRAN total downloads"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/license-MIT-brightgreen.svg" alt="MIT license"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by David McCoy.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
